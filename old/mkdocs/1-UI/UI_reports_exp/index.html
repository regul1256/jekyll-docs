<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>List of Report expressions - ControlMachines™ HMI user guide</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "List of Report expressions", url: "#_top", children: [
              {title: "The snapshotHistory function", url: "#the-snapshothistory-function" },
              {title: "Other Reports expressions", url: "#other-reports-expressions" },
              {title: "Principles", url: "#principles" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    

    <h1 id="list-of-report-expressions">List of Report expressions<a class="headerlink" href="#list-of-report-expressions" title="Permanent link">#</a></h1>
<p>This article describes the expressions used in the Report module.</p>
<h2 id="the-snapshothistory-function">The <code>snapshotHistory</code> function<a class="headerlink" href="#the-snapshothistory-function" title="Permanent link">#</a></h2>
<p><code>snapshotHistory(pathToTag, time)</code></p>
<p>If the <code>time</code> argument is unspecified, the function returns an average value for the period from the report's beginning to ending time. If opposite, the function returns the tag value for the specified moment. The <code>time</code> argument can be one of the following functions:</p>
<ul>
<li><code>getStartDate()</code> </li>
<li><code>getStartDate()</code></li>
<li><code>getTimeBefore()</code></li>
</ul>
<p>Also, this argument can be a timestamp of the following format: "YYYY-MM-DD HH:MM:SS".</p>
<p>The parameter <code>pathToTag</code> defines the tag address in the project. In general, the path has the following view:</p>
<pre><code>&quot;project_id/Signals/Folder1/../Tag_name&quot;
</code></pre>

<p>The following examples of the <code>snapshotHistory()</code> function show different use cases.</p>
<ol>
<li>
<p>History value for a specific point in time:</p>
<p><code>snapshotHistory("063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP", '2019-10-14 11:15')</code></p>
</li>
<li>
<p>History value for the beginning time of the report:</p>
<p><code>snapshotHistory("063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP", getStartDate())</code></p>
</li>
<li>
<p>History value for the report's period:</p>
<p><code>snapshotHistory("063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP")</code></p>
</li>
</ol>
<h2 id="other-reports-expressions">Other Reports expressions<a class="headerlink" href="#other-reports-expressions" title="Permanent link">#</a></h2>
<p><code>getStartDate()</code></p>
<p>This function returns the UNIX timestamp of the beginning time of the report.</p>
<p><code>getEndDate()</code></p>
<p>This function returns the UNIX timestamp of the ending time of the report.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>ControlMachines™ counts UNIX time in milliseconds.</p>
</div>
<p><code>toFixed(value, digits)</code></p>
<p>This function rounds a decimal value to a specified number of digits. The first argument may be either a static value or a function's result. The second argument is the number of decimal places to be left. The number of decimal places lays between 0 and 20. If the second argument is omitted, then the function rounds the value to ones.</p>
<p>Here is a usage example of this function:</p>
<pre><code>toFixed(snapshotHistory(&quot;063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP&quot;), 2)
</code></pre>

<p>The example shows that the <code>toFixed</code> function rounds the result of the <code>snapshotHistory</code> function to the nearest hundredth.</p>
<p><code>getTimeBefore(unit, time?)</code></p>
<p>This function returns the UNIX timestamp of a specified moment in the past. The argument <code>unit</code> defines the retrospective period. Available units of time:</p>
<ul>
<li>s - second</li>
<li>m - minute</li>
<li>h - hour</li>
<li>d - day</li>
<li>w - week</li>
<li>mo - month</li>
<li>y - year</li>
</ul>
<p>And the <code>time</code> parameter is a point in time from which the period takes count. If this argument is undefined, then the count takes place from the current moment.</p>
<p>The following example shows the use of this function:</p>
<pre><code>getTimeBefore('3d', '2019-10-14 17:53:00')
</code></pre>

<p>The result of this function would be this timestamp: <strong>1570798380000</strong>, which stands for 2019-10-11 12:53 (UTC).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The function returns Coordinated Universal Time (UTC). It is necessary to mind the time zone when defining the argument.</p>
</div>
<h2 id="principles">Principles<a class="headerlink" href="#principles" title="Permanent link">#</a></h2>
<p>You can create complex expressions with multiple and various arguments:</p>
<pre><code>toFixed((snapshotHistory(&quot;063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP&quot;, '2019-10-14 11:15') +
snapshotHistory(&quot;063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_PV&quot;, '2019-10-14 11:14'))/ 
snapshotHistory(&quot;063441c03f1211e994560242ac14000c/Signals/CM-Core1/GT11/3020_VS11_GT11_SP&quot;, '2019-10-14 11:16'), 2)
</code></pre>

<p>Follow these simple principles when writing an expression:</p>
<ul>
<li>An opening bracket should pair a closing one</li>
<li>Put tag paths inside double quotation marks</li>
<li>Put other arguments inside single quotation marks</li>
</ul>
<hr />
<p><strong>Parent article:</strong></p>
<ul>
<li><strong><a href="../UI_reports_ed/">Report editor</a></strong><br>
Here you can find brief information about the Report editor.</li>
</ul>

  <br>
    

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>